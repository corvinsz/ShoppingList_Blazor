@page "/"
@attribute [StreamRendering]
@rendermode InteractiveServer

@using ShoppingList_Blazor.Models;

@inject IDialogService DialogService

<MudList T="ShoppingItem">
    @foreach(var item in Items)
    {
        <MudListItem>
            <MudStack Row="true">
                <MudCheckBox @bind-Value="item.IsChecked"
                             Label="@item.Description"
                             Color="Color.Primary"></MudCheckBox>
            </MudStack>
        </MudListItem>
    }

</MudList>

<MudFab Color="Color.Primary" StartIcon="@Icons.Material.Filled.Add" @onclick="AddShoppingItem" />

@code {
    

    public List<ShoppingItem> Items { get; set; }

    protected override void OnInitialized()
    {
        base.OnInitialized();

        Items = 
        [
            new ShoppingItem(Guid.NewGuid(), "Rice"),
            new ShoppingItem(Guid.NewGuid(), "Noodles"),
            new ShoppingItem(Guid.NewGuid(), "Potoatoes"),
            new ShoppingItem(Guid.NewGuid(), "Water"),
            new ShoppingItem(Guid.NewGuid(), "Water")
        ];
    }

    private Task AddShoppingItem()
    {
        var options = new DialogOptions { CloseOnEscapeKey = true };

        return DialogService.ShowAsync<DialogUsageExample_Dialog>("Simple Dialog", options);
    }
}